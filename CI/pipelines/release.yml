agents:
  queue: cardano-wallet

env:
  LC_ALL: "C.UTF-8"
  NIX_PATH: "channel:nixos-24.11"
  CI_SCRIPTS_DIR: "./CI/scripts"
  CI_DIR: "./CI"
  RELEASE_SCRIPT: "nix develop $CI_DIR#release --command"
  linux_agent: "x86_64-linux"

steps:
  - label: Add Release Commits
    key: add-release-commits
    commands:
      - $RELEASE_SCRIPT $CI_SCRIPTS_DIR/add-release-commits.sh
  - label: Trigger Main Pipeline
    key: trigger-main-pipeline
    depends_on:
      - add-release-commits
    commands:
      - $RELEASE_SCRIPT $CI_SCRIPTS_DIR/trigger-main-from-release.sh \
          | buildkite-agent pipeline upload